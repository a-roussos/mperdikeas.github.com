<html>
  <head>
    <link type="text/css" rel="stylesheet" href="mperdikeasgithub.css"/>
    <link rel='icon' href='/knowledge-favicon.ico'/>
  </head>
  <body>
    <ol reversed>
      <li id='how-to-publish-in-npm'>How to publish something in <b>npm</b></li>
      <p>
        <a href='https://quickleft.com/blog/creating-and-publishing-a-node-js-module/'>nice article</a>
        <br/>
        <a href='npm-and-node.resources/how-to-publish-to-npm.html'>copy (in case the original goes offline)</a>.
      </p>
      <p>
      Examples of two npm modules I've successfully published and used using the above guides:
      <ul>
        <li><a href='https://github.com/mperdikeas/js-object-properties'>js-object-properties</a></li>
        <li><a href='https://github.com/mperdikeas/faker-datastore'>faker-datastore</a></li>
      </ul>
      </p>
      <h3>gotchas</h3>
        <p>
          <ul>
            <li>to be able to perform the test regarding the local-global installation you'd have to first setup <tt>Node</tt> to search that location as well (see <a href='#node-local-global'>this note</a>).</li>
            <li>Before you publish to <b>npm</b> you should test your package by means of publishing locally
              and then requiring it from another directory (from the REPL). This is explained in the guide
              linked above and the local global installation command is correctly given as:
              <pre>
npm install . -g
               </pre>
               <p>
                 However, after the initial local global installation you will invariably encounter bugs that you will have to
                 fix (locally again). After each fix you should do (from the root of your project):
                 <pre>
npm run build && npm install . -g
                 </pre>
               </p>
               <p>
                 During these (local) iterations (that don't get published to the public <b>npm</b> repository) you
                 don't need to update the version in <tt>package.json</tt>.
               </p>
               <p>
                 To test, simply <tt>cd</tt> to some other dir, open a repl (<tt>node</tt> or <tt>nodejs</tt>)
                 and <tt>require</tt> your package to test its newly added functionality.
               </p>
               <p>
                 At the end of a number of such iterations you are now able to publish to <b>npm</b>.
                 Before you do that however, remember to update the version in <tt>package.json</tt>
                 respecting <a href='http://semver.org/'>semver</a>.<br/>
                 Once this is done do:
<pre>
npm publish
</pre>
               </p>
               <p>
                 However, even if you do forget to update <tt>package.json</tt> <b>npm</b> will baulk with an informative
                 message, so no worries there.
               </p>

               <p>
                 Afterwards, you are able to install your package from everywhere by name (rather than, e.g. having to
                 point at a Github URL):
                 <pre>
npm install &lt;your-package-name&gt;
                 </pre>
               </p>
               You may also have to do a:
               <pre>
npm update -g &lt;your-package-name&gt;
               </pre>
               &hellip; to ensure that your package has been updated in the global (local) repository (though if you've already
               installed it locally with <code>npm install . -g</code> you may not see any difference. At any rate you can
               use the following command to find the locally available version of your package:
               <pre>
npm ls -g | grep &lt;your-package-name&gt;
               </pre>
               <p>               
            </li>
          </ul>
        </p>
      <li id='node-local-global'>How to instruct <b>Node</b> to search for packages in the "local-global" location</li>
      Put the following in your <tt>.bashrc</tt>:
      <pre>
    export NODE_PATH=$NODE_PATH:~/.node_modules_global/lib/node_modules
      </pre>
      <li id='include-javascript-file-traditionally'>Include a JavaScript file in the "traditional" sense</li>
      <a href='http://stackoverflow.com/a/5809968/274677'>source</a>
      <br/>
      Notes:
      <ul>
        <li>won't work with <tt>"use strict"</tt></li>
        <li>useful for "quick and dirty" using JS libs designed for client-side into a node.js app</li>
      </ul>
      <pre>
var fs = require('fs');
// file is included here:
eval(fs.readFileSync('file-to-include.js')+'');
      </pre>
      <li id='print-sources-core-packages'>Ask node to print the sources of function in core packages</li>
<pre>
$ node
> fs = require('fs');
> fs.writeFileSync('fs.js', fs.toString())
> fs.writeFileSync('fs.readFileSync.js', fs.readFileSync.toString())
[Ctrl-C][Ctrl-C]
</pre>
      <li id='install-npm-3-in-Ubuntu'>How to install <tt>npm</tt> 3 in Ubuntu</li>
      The following has worked for me in Ubuntu 14.04 and 12.04:
      <br/>
      <pre>
sudo npm install npm@3 -g
$ npm -version
3.8.0
      </pre>
      <li id='install-node-4-in-Ubuntu'>How to install Node.js 4 in Ubuntu</li>
      <a href='http://askubuntu.com/a/682514/89663'>source</a>
      <br/>
      The following process worked for me on Ubuntu 14.04 and 12.04 and allowed me to install Node.js v4.3.2:
      <br/>
      In a sudo shell:
      <pre>
apt-key adv --keyserver keyserver.ubuntu.com --recv 68576280
apt-add-repository 'deb https://deb.nodesource.com/node_4.x precise main'
apt-get update
apt-get install nodejs
      </pre>
      <br/>
      <b>NB:</b>I also have <tt>node</tt> symlinked via "alternatives" to <tt>nodejs</tt>:
      <br/>
      <pre>
$ ls /usr/bin/node
lrwxrwxrwx 1 root root 22 Mar  7 10:23 /usr/bin/node -> /etc/alternatives/node*
$ ls /etc/alternatives/node
lrwxrwxrwx 1 root root 15 Mar  7 10:23 /etc/alternatives/node -> /usr/bin/nodejs*
      </pre>
      <li id='how-to-install-guard-livereload'>How to install <b>guard-livereload</b></li>
      On 2016-02-20 the following procedure (<a href="http://www.thelacunablog.com/install-livereload-ubuntu.html">source</a>) worked for me:
      <ol type="1">
        <li>sudo apt-get install ruby-dev</li>
        <li>sudo gem install rdoc -V</li>
        <li>sudo gem install guard -V</li>
        <li>sudo gem install guard-livereload -V</li>
      </ol>
      <br/>
      I think actually step 4 was the only necessary step.
      <br/>
      I then created the symlinks mentioned in
      <a href="#how-to-install-guard-livereload">this post below</a>.
      <li id='how-to-install-guard-livereload'>How to install <b>guard-livereload</b></li>
      What worked for me (in 2015-10) was to follow the instructions from:
      <br/>
      <br/>
      <a href="https://github.com/guard/guard-livereload">the github repo for <b>guard-livereload</b></a>
      <br/>
      <br/>
      I've also created a script to run <b>guard</b> (in <code>~/playground/repo-wide-scripts</code>).
      <br/>
      I the same location I've also created:
      <ul>
        <li>A sample <code>Guardfile</code></li>
        <li>The <code>Gemfile</code> to be used</li>
      </ul>
      Basically what needs now be done (in a new project, new machine) is:
      <ol>
        <li><code>sudo gem install guard-livereload</code></li>
        <li><code>sudo apt-get install bundler</code></li>
        <li><code>ln -s ~/playground/repo-wide-scripts/Gemfile</code></li>
        <li><code>ln -s ~/playground/repo-wide-scripts/Guardfile</code></li>
        <li><code>ln -s ~/playground/repo-wide-scripts/run-guard</code></li>
      </ol>
      <br/>
      An example of this properly setup and working well is found in my <a href="https://github.com/mperdikeas/playground/tree/master/javascript-canvas/004-bouncing-ball-physics">bouncing ball project</a> (file <code>run-guard</code> which ultimately
      links to <a href="https://github.com/mperdikeas/playground/blob/master/repo-wide-scripts/run-guard">this script</a>).
      <li>how to install <tt>npm</tt> and configure it to install global packages in your home directory</li>
      <a href='http://www.sitepoint.com/beginners-guide-node-package-manager/'>This</a> is a
      great guide in how to setup <tt>npm</tt> for your local environment (and how to
      configure <tt>global</tt> to point to your home directory instead).
      <br/>
      I've made a copy of the document in case the original resource goes
      offline <a href='beginners-guide-node-package-manager.html'>here</a>      <li id='npm-nvm'><b><i>NB: Deprecated</b></i>  How to use node and install npm packages in home folder</li>
      I have used the approach to install node packages via the <code>npm</code> tool in the home folder as described 
      <a href='http://www.sitepoint.com/beginners-guide-node-package-manager/'>here</a>.
      However with this approach, one (at least in Ubuntu 14.04) cannot use the <code>nodejs</code> executable
      but has to use the <code>node</code> one that is available with the <code>nvm</code> tool.
      This is described <a href='https://www.digitalocean.com/community/tutorials/how-to-install-node-js-on-an-ubuntu-14-04-server'>here</a> in the section "How to Install Using NVM".
      <strong>NB:</strong>I actually had to use <code>sudo curl .. | sh</code> to install it.
      <br/>
      <br/>
      Then don't forget upon installing a package, e.g. <code>npm prompt</code> to also do <code>nvm link prompt</code>
      (as described in the link above). An example is given in:
      <pre>
        ~/playground/javascript-you-dont-know
      </pre>
      <li><i><b>NB: Deprecated (?)</b></i> install Node.js for Ubuntu</li>
      On 6.II.2015 I followed <a href="https://github.com/joyent/node/wiki/Installing-Node.js-via-package-manager#debian-and-ubuntu-based-linux-distributions">these instructions</a> and they worked on my Ubuntu 12.04 machine.
    </ol>
  </body>
</html>
