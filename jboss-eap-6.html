<html>
  <head>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
    <link type="text/css" rel="stylesheet" href="mperdikeasgithub.css"/>    
    <link rel='icon' href='/knowledge-favicon.ico'/>
  </head>

  <body>
    <ol reversed class='main-list-items'>
      <li>JSP compilation problem when EAP 6.2 is run with a Java 8 interpreter</li>
      <p>
        I got a JSP compilation problem when running EAP 6.2 with a Java 8 runtime.
        This is what it looks like:
        <a href="jboss-eap-6.html.files/jsp-compilation-problem-with-Java8.png">
          <img height="300px" width="400px" src="jboss-eap-6.html.files/jsp-compilation-problem-with-Java8.png"/>
        </a>
      </p>
      <p>
        The problem is treacherous as it occurs, not upon deployment of the WAR but rather when the JSP page is
        accessed (at which point JBoss attempts to compile it). It is further compounded by the fact that it may
        not show up if a compiled version of the JSP page happens to exist in JBoss cache (e.g. from a time
        when JBoss was run with a different, compatible, version of Java). In the latter case, to trigger
        the problem you will have to delete the <i>standalone/tmp</i> directory of JBoss.
      </p>
      <p>
        In my environment the default Java version was 1.8 hence I had this problem. To solve the problem
        you need to ensure that your JBoss is launched with Java 1.7. There's two ways to accomplish this:
        <ul>
          <li>set the <i>PATH</i> at the point when you invoke the <i>standalone.sh</i> script (i.e. at the
            narrowest possible scope). E.g.
            <pre>PATH=/some/path/jdk-1.7.0.95.Linux64/bin/:$PATH ./standalone.sh  -c standalone-full.xml </pre>
          </li>
          <li>set the <i>JAVA_HOME</i> in <i>standalone.conf</i>:
            <pre>
$ grep -i java_home standalone.conf
JAVA_HOME="/usr/lib/jvm/java-1.7.0-openjdk-amd64"</pre>
        </ul>
      </p>
      <p>
        This compilation problem should not come as a total surprise as JBoss does not list Java 1.8
        as a supported configuration for EAP 6.2 (see <a href='#eap-6.2-supported-java'>here</a>).
      </p>
      </p>
      <li id='eap-6.2-supported-java'>EAP 6.2 supported Java versions</li>
      <p>
        <a href='https://access.redhat.com/articles/111663'>source</a>
      </p>
      <p>
        As can be seen by the following table JBoss EAP 6.2 effectively
        does not support Java 8:
        <table>
          <tr>
            <th>Java Virtual Machine</th>
            <th>Version</th>
          </tr>
          <tr>
            <td>OpenJDK [2]</td>
            <td>1.6<br />
              1.7<br />
              1.8 ** support only with 6.4.1 update and above</td>
          </tr>
          <tr>
            <td>Oracle JDK</td>
            <td>1.6<br />
              1.7<br />
              1.8 ** support only with 6.3.3 update and above</td>
          </tr>
          <tr>
            <td>IBM JDK</td>
            <td>1.6<br />
              1.7<br />
              1.8 ** support only with 6.3.3 update and above</td>
          </tr>
          <tr>
            <td>HP JDK [3]</td>
            <td>1.7</td>
          </tr>
          <tr>
            <td>Azul Zing JDK</td>
            <td>1.6<br />
              1.7<br />
              1.8</td>
          </tr>
          <tr>
            <td>Azul Zulu </td>
            <td>1.7</td>
          </tr>
        </table>
      </p>
      <li>how to gracefully shutdown EAP 6.2</li>
      Execute the following in the <tt>bin</tt> directory:
      <pre>
./jboss-cli.sh --connect command=:shutdown</pre>
      <li><a href='jboss-eap-6.html.files/how-to-verify-or-change-admin-password.html'>how to verify or change the password for the management user in JBoss EAP 6.2</a></li>
      <li><a href='jboss-eap-6.html.files/other-instructions-on-how-to-setup-jboss-eap6.html'>a slightly different (but comprehensive) process on how to setup JBoss EAP 6.2</a></li>
      <li><a href='jboss-eap-6.html.files/configure-eap6_2-to-use-openjdk-1_7.html'>configure JBoss EAP 6.2 to use OpenJDK 1.7 (instead of Oracle 1.8)</a></li>
      <li>groking logging in JBoss EAP 6.2 (and how to configure it)</li>
      <a href='jboss-eap-6.html.files/how-to-configure-logging-in-jboss-eap-6.2.html'>Writeup of what I did January 2017 in order to configure logging in JBoss EAP 6.2</a></li>      
      <li>how to install a JDBC driver and configure a datasource</li>
      <a href='jboss-eap-6.html.files/how-to-configure-a-datasource.html'>Writeup of what I did December 2016 in order to configure a datasource in JBoss EAP 6</a></li>
      <li>basic sequence of actions for setting up clusting in JBoss EAP 6.0.0</li>
      <ol type=i>
        <li>follow the instructions in Chapters 13.x and 14.1.9 of the JBoss Administration and Configuration guide (available from the official JBoss site</li>
        <li>setup JBoss EAP in two hosts (or virtual hosts) and declare one to be the master and the other to be the slave</li>
        <li>add a user, obtain 'secret' and configure it in the 'server identities' of that EAP instance (or the other?)</li>
        <li>do some stuff in JMS so that they can see each other</li>
        <li>establish that they can indeed see each other by looking at the logs</li>
      </ol>
    </ol>
  </body>
</html>


